<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>观察者模式</title>
    <!--知识点：观察者模式，难点：js代码中有很多知识还不懂-->
</head>
<body>
    <button>点击触发page任务</button>
    <button>点击取消page任务</button>
</body>
    <script src="../js/jquery-3.2.1.js"></script>
    <script src="../js/Observer.js"></script>
    <script type="text/javascript">
        //观察者
        var observer = new Observer();
        //page函数
        //模拟运行1秒的一个函数
        function page() {
            setTimeout(function () {
                observer.publish('complete')
            }, 1000)
        }
        //订阅一个完成的时间
        observer.subscribe('complete', function () {
            alert("page任务完成");
        })
        //触发任务
        $("button:first").click('click', function () {
            alert("haha")
            page();
        }, false);
        //取消任务
        $("button:last").click('click', function () {
            observer.unsubscribe("compelte");
            alert("注销了订阅了compelte事件");
        }, false)
    </script>
</html>